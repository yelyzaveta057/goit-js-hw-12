{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49711703-11461993d80a106b3cce7e78b';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet PER_PAGE = 15;\nlet page = 1;\n\nexport async function searchImages(query) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: PER_PAGE,\n        page: page,\n      },\n    });\n\n    page += 1;\n\n    return { images: response.data.hits, totalHits: response.data.totalHits };\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    return { images: [], totalHits: 0 };\n  }\n}\n\nexport function resetPage() {\n  page = 1;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// Функція для створення карток зображень\nexport function createImageMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"tittle\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`\n    )\n    .join('');\n}\n\n// Функція для оновлення галереї\nexport function updateGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = createImageMarkup(images);\n  lightbox.refresh();\n  smoothScroll();\n}\n\n// Функція для показу повідомлення про помилку\nexport function showNoResultsMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\nexport function smoothScroll() {\n  const firstCard = document.querySelector('.gallery-item');\n\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n}\n","import { searchImages, resetPage } from './js/pixabay-api.js';\nimport { updateGallery, showNoResultsMessage } from './js/render-functions.js';\nimport { smoothScroll } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-load');\nconst btnLoad = document.querySelector('.btn-load');\n\nloader.style.display = 'none';\nbtnLoad.style.display = 'none';\nloaderMore.style.display = 'none';\n\nlet currentQuery = '';\nlet totalHits = 0;\nlet imagesLoaded = 0;\n\n// лоадер спочатку прихований\nform.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const query = input.value.trim();\n  if (query === '') {\n    showNoResultsMessage('Please enter a search query!');\n    return;\n  }\n\n  resetPage();\n  gallery.innerHTML = '';\n  btnLoad.style.display = 'none';\n  loader.style.display = 'block';\n  currentQuery = query;\n\n  searchImages(currentQuery)\n    .then(images => {\n      loader.style.display = 'none'; // ховаємо лоадер після отримання результатів\n      if (images.length === 0) {\n        showNoResultsMessage(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        return;\n      }\n\n      totalHits = hits;\n      imagesLoaded = images.length;\n\n      updateGallery(images);\n\n      if (imagesLoaded < totalHits) {\n        btnLoad.style.display = 'block';\n      } else {\n        btnLoad.style.display = 'none'; // Якщо тільки 1 фото, ховаємо кнопку\n        showNoResultsMessage(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      showNoResultsMessage('Error fetching images. Please try again!');\n      console.error('Помилка сервера:', error.message);\n    });\n\n  form.reset();\n});\n\nbtnLoad.addEventListener('click', async () => {\n  if (currentQuery === '') return;\n\n  loaderMore.style.display = 'block';\n  btnLoad.style.display = 'none';\n\n  await searchImages(currentQuery)\n    .then(({ images }) => {\n      loaderMore.style.display = 'none';\n\n      if (images.length === 0) {\n        showNoResultsMessage(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        return;\n      }\n\n      updateGallery(images);\n      smoothScroll();\n\n      imagesLoaded += images.length;\n\n      if (imagesLoaded >= totalHits) {\n        btnLoad.style.display = 'none';\n        showNoResultsMessage(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      } else {\n        btnLoad.style.display = 'block';\n      }\n    })\n    .catch(error => {\n      loaderMore.style.display = 'none';\n      showNoResultsMessage('Error loading more images.');\n      console.error('Помилка сервера:', error.message);\n    });\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","page","searchImages","query","response","axios","error","resetPage","lightbox","SimpleLightbox","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","gallery","smoothScroll","showNoResultsMessage","message","iziToast","firstCard","cardHeight","form","input","loader","loaderMore","btnLoad","currentQuery","totalHits","imagesLoaded","event"],"mappings":"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"}