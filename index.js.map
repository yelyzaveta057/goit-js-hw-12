{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49711703-11461993d80a106b3cce7e78b';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet PER_PAGE = 15;\nlet page = 1;\n\nexport async function searchImages(query) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: PER_PAGE,\n        page: page,\n      },\n    });\n\n    page += 1;\n\n    return { images: response.data.hits, totalHits: response.data.totalHits };\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    return { images: [], totalHits: 0 };\n  }\n}\n\n// Скидання  сторінок\nexport function resetPage() {\n  page = 1;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// Функція для створення карток зображень\nexport function createImageMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"tittle\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`\n    )\n    .join('');\n}\nexport function updateGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', createImageMarkup(images));\n  lightbox.refresh(); // Оновлюємо SimpleLightbox після додавання нових зображень\n  smoothScroll(); // додаємо скролл\n}\n\nexport function showNoResultsMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function smoothScroll() {\n  const firstCard = document.querySelector('.gallery-item');\n\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n}\n","import { searchImages, resetPage } from './js/pixabay-api.js';\nimport { updateGallery, showNoResultsMessage } from './js/render-functions.js';\nimport { smoothScroll } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-load');\nconst btnLoad = document.querySelector('.btn-load');\n\nloader.style.display = 'none';\nbtnLoad.style.display = 'none';\nloaderMore.style.display = 'none';\n\nlet currentQuery = '';\nlet totalHits = 0;\nlet imagesLoaded = 0;\n\nform.addEventListener('submit', async function (event) {\n  event.preventDefault();\n\n  const query = input.value.trim();\n\n  if (query === '') {\n    showNoResultsMessage('Please enter a search query!');\n    return;\n  }\n\n  resetPage();\n  gallery.innerHTML = '';\n  btnLoad.style.display = 'none';\n  loader.style.display = 'block';\n\n  currentQuery = query;\n\n  try {\n    const { images, totalHits: hits } = await searchImages(currentQuery);\n\n    loader.style.display = 'none';\n\n    if (images.length === 0) {\n      showNoResultsMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    totalHits = hits;\n    imagesLoaded = images.length;\n\n    updateGallery(images);\n\n    if (imagesLoaded < totalHits) {\n      btnLoad.style.display = 'block';\n    } else {\n      btnLoad.style.display = 'none';\n      showNoResultsMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    showNoResultsMessage('Error fetching images. Please try again!');\n    console.error('Помилка сервера:', error.message);\n  }\n\n  form.reset();\n});\n\nbtnLoad.addEventListener('click', async () => {\n  if (currentQuery === '') return;\n\n  loaderMore.style.display = 'block';\n  btnLoad.style.display = 'none';\n\n  try {\n    const { images } = await searchImages(currentQuery);\n    loaderMore.style.display = 'none';\n\n    if (images.length === 0) {\n      showNoResultsMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      return;\n    }\n\n    updateGallery(images);\n    smoothScroll();\n\n    imagesLoaded += images.length;\n\n    if (imagesLoaded >= totalHits) {\n      btnLoad.style.display = 'none';\n      showNoResultsMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    } else {\n      btnLoad.style.display = 'block';\n    }\n  } catch (error) {\n    loaderMore.style.display = 'none';\n    showNoResultsMessage('Error loading more images.');\n    console.error('Помилка сервера:', error.message);\n  }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","page","searchImages","query","response","axios","error","resetPage","lightbox","SimpleLightbox","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","smoothScroll","showNoResultsMessage","message","iziToast","firstCard","cardHeight","form","input","gallery","loader","loaderMore","btnLoad","currentQuery","totalHits","imagesLoaded","event","hits"],"mappings":"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"}